{"version":3,"sources":["user/profile.component.ts"],"names":[],"mappings":"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","file":"user/profile.component.js","sourcesContent":["import { Component, OnInit, ElementRef } from \"@angular/core\";\nimport { AuthenticationService } from \"../service/authentication.service\";\nimport { UserService } from \"../service/user.service\";\nimport { ToastsManager } from 'ng2-toastr/ng2-toastr';\nimport { AlertService } from \"../service/alert.service\";\ndeclare var jQuery: any;\n\n@Component({\n\tselector: \"profile-component\",\n\ttemplateUrl: \"template/user/profile.component.html\",\n\tproviders: [UserService]\n})\n\nexport class ProfileComponent implements OnInit{\n\tprivate profile: any;\n\timage: Object;\n\n\tconstructor(private authentication: AuthenticationService,\n\t\tprivate userService: UserService,\n\t\tprivate toast: ToastsManager,\n\t\tprivate alter: AlertService,\n\t\tprivate _elRef: ElementRef){\n\n\t}\n\n\tngOnInit(){\n\t\tthis.profile = this.authentication.getUser();\n\t\tthis.profile.password = '';\n\t}\n\n\tgetFiles(file){\n\t\tthis.image = file.target.files;\n\t}\n\n\tprofileForm(){\n\t\tvar self = this;\n\t\tthis.userService.UpdateProfile(this.profile, this.image).subscribe(data=>{\n\t\t\tthis.alter.success(\"Cập nhật thông tin thành công.\", false);\n\t\t\tif (data.data && data.data.api_token) {\n\t\t\t\tlocalStorage.setItem('currentUser', JSON.stringify(data.data));\n\t\t\t}\n\t\t\tthis.profile = this.authentication.getUser();\n\t\t\tthis.profile.password = '';\n\t\t}, errors=>{\n\t\t\tlet err = JSON.parse(errors._body);\n\t\t\tif (err.firstname){\n\t\t\t\tthis.toast.error(err.firstname[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#firstname\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.name){\n\t\t\t\tthis.toast.error(err.name[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#name\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.address){\n\t\t\t\tthis.toast.error(err.address[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#address\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.phone){\n\t\t\t\tthis.toast.error(err.phone[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#phone\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.password){\n\t\t\t\tthis.toast.error(err.password[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#password\").focus();\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#password\").val('');\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#password-confirm\").val('');\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n}"],"sourceRoot":"/source/"}