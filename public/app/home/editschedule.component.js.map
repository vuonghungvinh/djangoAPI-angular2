{"version":3,"sources":["home/editschedule.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAiBA;gBAOC,+BAAoB,MAAc,EACzB,YAA4B,EAC5B,YAA0B,EAC1B,eAAgC,EAChC,cAA8B,EAC9B,MAAkB,EAClB,YAA0B,EAC1B,KAAoB;oBAPT,WAAM,GAAN,MAAM,CAAQ;oBACzB,iBAAY,GAAZ,YAAY,CAAgB;oBAC5B,iBAAY,GAAZ,YAAY,CAAc;oBAC1B,oBAAe,GAAf,eAAe,CAAiB;oBAChC,mBAAc,GAAd,cAAc,CAAgB;oBAC9B,WAAM,GAAN,MAAM,CAAY;oBAClB,iBAAY,GAAZ,YAAY,CAAc;oBAC1B,UAAK,GAAL,KAAK,CAAe;gBAE7B,CAAC;gBAED,wCAAQ,GAAR;oBAAA,iBAoCC;oBAnCA,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,UAAA,MAAM;wBAC3D,KAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;oBACzB,CAAC,CAAC,CAAC;oBAEH,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,UAAA,IAAI;wBACzC,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACpB,CAAC,CAAC,CAAC;oBAEH,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,UAAA,IAAI;wBAC9C,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACrB,CAAC,CAAC,CAAC;oBAEH,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,UAAA,IAAI;wBAC9D,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;wBACrB,KAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;oBAC3D,CAAC,CAAC,CAAC;oBAEH,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,UAAU,CAAC;wBACV,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,cAAc,CAAC;4BACvE,MAAM,EAAE,qBAAqB;4BAC7B,OAAO,EAAE,gBAAM,CAAC,qBAAqB,CAAC;yBACtC,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,UAAS,CAAC;4BAC5B,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;4BACnE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;wBAC/F,CAAC,CAAC,CAAC;wBAEH,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,cAAc,CAAC;4BACrE,MAAM,EAAE,qBAAqB;4BAC7B,OAAO,EAAE,gBAAM,CAAC,qBAAqB,CAAC;yBACtC,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE,UAAS,CAAC;4BAE5B,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;wBAClE,CAAC,CAAC,CAAC;oBACJ,CAAC,EAAC,IAAI,CAAC,CAAC;gBACT,CAAC;gBAED,sCAAM,GAAN;oBAAA,iBAwDC;oBAvDA,IAAI,IAAI,GAAG,IAAI,CAAC;oBAChB,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,UAAA,IAAI;wBAClF,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,iCAAiC,EAAE,IAAI,CAAC,CAAC;wBACnE,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBAC7B,CAAC,EAAE,UAAA,MAAM;wBACR,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;wBACnC,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA,CAAC;4BACjB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC3C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;4BAC5D,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA,CAAC;4BACb,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BACvC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;4BACxD,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA,CAAC;4BACrB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC/C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,KAAK,EAAE,CAAC;4BAChE,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAA,CAAC;4BACnB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC7C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;4BAC9D,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA,CAAC;4BACtB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAChD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,CAAC;4BACjE,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA,CAAC;4BACpB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC9C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;4BAC/D,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAA,CAAC;4BACjB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC3C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;4BAC5D,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA,CAAC;4BACpB,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BAC9C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,KAAK,EAAE,CAAC;4BAC/D,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA,CAAC;4BACb,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;4BACvC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;4BACxD,MAAM,CAAC;wBACR,CAAC;wBACD,EAAE,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA,CAAC;4BACd,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;wBACzC,CAAC;oBACF,CAAC,CAAC,CAAC;gBACJ,CAAC;gBAED,2CAAW,GAAX;oBACC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;gBAChC,CAAC;gBA1HF;oBAAC,gBAAS,CAAC;wBACV,QAAQ,EAAE,wBAAwB;wBAClC,WAAW,EAAE,8CAA8C;wBAC3D,SAAS,EAAE,CAAC,kCAAe,EAAE,gCAAc,EAAE,4BAAY,CAAC;qBAC1D,CAAC;;yCAAA;gBAuHF,4BAAC;YAAD,CArHA,AAqHC,IAAA;YArHD,yDAqHC,CAAA","file":"home/editschedule.component.js","sourcesContent":["import { Component, OnInit, OnDestroy, ElementRef } from \"@angular/core\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\nimport { Subscription } from \"rxjs\";\nimport { ScheduleService } from \"../service/schedule.service\";\nimport { AlertService } from \"../service/alert.service\";\nimport { AddressService } from \"../service/address.service\";\nimport { TrainService } from \"../service/train.service\";\nimport moment from 'moment';\ndeclare var jQuery: any;\nimport { ToastsManager } from 'ng2-toastr/ng2-toastr';\n\n@Component({\n\tselector: \"editschedule-component\",\n\ttemplateUrl: \"template/homepage/editshedule.component.html\",\n\tproviders: [ScheduleService, AddressService, TrainService]\n})\n\nexport class EditScheduleComponent implements OnDestroy, OnInit{\n\tprivate _id: number;\n\tprivate subcription: Subscription;\n\tprivate schedule: any;\n\tprivate address: any[];\n\tprivate trains: any[];\n\n\tconstructor(private router: Router,\n\t\tprivate activeRouter: ActivatedRoute,\n\t\tprivate alterService: AlertService,\n\t\tprivate scheduleService: ScheduleService,\n\t\tprivate addressService: AddressService,\n\t\tprivate _elRef: ElementRef,\n\t\tprivate trainService: TrainService,\n\t\tprivate toast: ToastsManager){\n\n\t}\n\n\tngOnInit(){\n\t\tthis.subcription = this.activeRouter.params.subscribe(params=>{\n\t\t\tthis._id = params['id'];\n\t\t});\n\n\t\tthis.trainService.GetList().subscribe(data=>{\n\t\t\tthis.trains = data;\n\t\t});\n\n\t\tthis.addressService.GetAddress().subscribe(data=>{\n\t\t\tthis.address = data;\n\t\t});\n\n\t\tthis.scheduleService.GetDetailSchedule(this._id).subscribe(data=>{\n\t\t\tthis.schedule = data;\n\t\t\tthis.schedule.distance = parseInt(this.schedule.distance);\n\t\t});\n\n\t\tvar self = this;\n\t\tsetTimeout(function(){\n\t\t\tjQuery(self._elRef.nativeElement).find(\"#from_datetime\").datetimepicker({\n\t\t\t\tformat: \"YYYY-MM-DD HH:mm:00\",\n\t\t\t\tminDate: moment(\"YYYY-MM-DD HH:mm:00\")\n\t\t\t}).on(\"dp.change\", function(e){\n\t\t\t\tself.schedule.from_datetime = e.date.format(\"YYYY-MM-DD HH:mm:00\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#to_datetime\").data(\"DateTimePicker\").minDate(e.date);\n\t\t\t});\n\n\t\t\tjQuery(self._elRef.nativeElement).find(\"#to_datetime\").datetimepicker({\n\t\t\t\tformat: \"YYYY-MM-DD HH:mm:00\",\n\t\t\t\tminDate: moment(\"YYYY-MM-DD HH:mm:00\")\n\t\t\t}).on(\"dp.change\", function(e){\n\t\t\t\t//self.datetoChanged(e.date.format(\"YYYY-MM-DD HH:mm:00\"));\n\t\t\t\tself.schedule.to_datetime = e.date.format(\"YYYY-MM-DD HH:mm:00\");\n\t\t\t});\n\t\t},1000);\n\t}\n\n\tupdate(){\n\t\tvar self = this;\n\t\tthis.scheduleService.UpdateSchedule(this.schedule.id, this.schedule).subscribe(data=>{\n\t\t\tthis.alterService.success(\"Cập nhật lịch trình thành công.\", true);\n\t\t\tthis.router.navigate(['/']);\n\t\t}, errors=>{\n\t\t\tlet err = JSON.parse(errors._body);\n\t\t\tif (err.train_id){\n\t\t\t\tthis.toast.error(err.train_id[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#train_id\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.name){\n\t\t\t\tthis.toast.error(err.name[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#name\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.from_address){\n\t\t\t\tthis.toast.error(err.from_address[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#from_address\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.to_address){\n\t\t\t\tthis.toast.error(err.to_address[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#to_address\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.from_datetime){\n\t\t\t\tthis.toast.error(err.from_datetime[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#from_datetime\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.to_datetime){\n\t\t\t\tthis.toast.error(err.to_datetime[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#to_datetime\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.distance){\n\t\t\t\tthis.toast.error(err.distance[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#distance\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.wagon_train){\n\t\t\t\tthis.toast.error(err.wagon_train[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#wagon_train\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.note){\n\t\t\t\tthis.toast.error(err.note[0], \"Oops!\");\n\t\t\t\tjQuery(self._elRef.nativeElement).find(\"#note\").focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (err.error){\n\t\t\t\tthis.toast.error(err.error[0], \"Oops!\");\n\t\t\t}\n\t\t});\n\t}\n\n\tngOnDestroy(){\n\t\tthis.subcription.unsubscribe();\n\t}\n}"],"sourceRoot":"/source/"}